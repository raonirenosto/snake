
<canvas id="gc"></canvas>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="util.js"></script>
<script src="counter.js"></script>
<script src="apple.js"></script>
<script src="snake.js"></script>
<script src="screen.js"></script>
<script src="controller.js"></script>
<script>
  var screen;
  var snake;
  var counter;
  var gameOver = false;

  window.onload=function() {
    let squares =  40; // number of squares on the grid (horizontal)
    let snakeTail = 6; // snake tail size
    let pointsPerApple = 10; // points for each apple ate

    screen = new Screen(squares);
    snake = new Snake(snakeTail, screen.verticalSquares,
      screen.horizontalSquares);
    apple = new Apple(screen.verticalSquares, screen.horizontalSquares);
    counter = new Counter(pointsPerApple);

    sortApple();
    setInterval(draw,1000/15);

    document.addEventListener("keydown",keyPush);
  }

  function draw() {
    if (!gameOver) {
      snake.crawl();

      if (snake.ateOwnTail()) {
        gameOver=true;
        return;
      }

      if (snake.ateApple(apple)) {
        snake.growTail();
        counter.plusOne();
        sortApple();
      }

      screen.draw(snake, apple, counter);
    }
  }

  function sortApple() {
    do {
      apple.sortPosition();
    } while (snake.overlapsApple(apple));
  }

</script>
