
<canvas id="gc"></canvas>
<script src="util.js"></script>
<script src="counter.js"></script>
<script src="apple.js"></script>
<script src="snake.js"></script>
<script src="screen.js"></script>
<script src="controller.js"></script>
<script>
  var screen;
  var snake;
  var counter;
  var gameOver = false;

  window.onload=function() {
    let squares =  20; // number of squares on the grid
    let squareSize = 20; // square size in pixel
    let snakeTail = 6; // snake tail size

    screen = new Screen(squares, squareSize);
    snake = new Snake(snakeTail, squares);
    apple = new Apple(squares);
    counter = new Counter();

    sortApple();
    setInterval(draw,1000/15);

    document.addEventListener("keydown",keyPush);
  }

  function draw() {
    if (!gameOver) {
      snake.crawl();

      if (snake.ateOwnTail()) {
        gameOver=true;
        return;
      }

      if (snake.ateApple(apple)) {
        snake.growTail();
        counter.plusOne();
        sortApple();
      }

      screen.draw(snake, apple, counter);
    }
  }

  function sortApple() {
    do {
      apple.sortPosition();
    } while (snake.overlapsApple(apple));
  }

</script>
